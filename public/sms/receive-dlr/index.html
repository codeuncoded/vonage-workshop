<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.61.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Receiving Delivery Receipts :: Vonage Workshop</title>

    
    <link href="/css/nucleus.css?1578597367" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1578597367" rel="stylesheet">
    <link href="/css/hybrid.css?1578597367" rel="stylesheet">
    <link href="/css/featherlight.min.css?1578597367" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1578597367" rel="stylesheet">
    <link href="/css/auto-complete.css?1578597367" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1578597367" rel="stylesheet">
    <link href="/css/theme.css?1578597367" rel="stylesheet">
    <link href="/css/hugo-theme.css?1578597367" rel="stylesheet">
    
      <link href="/css/theme-blue.css?1578597367" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1578597367"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/sms/receive-dlr/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/images/vonagelogo-secondary-black.png"></img>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1578597367"></script>
<script type="text/javascript" src="/js/auto-complete.js?1578597367"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/vonage-workshop.nexmodev.com\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1578597367"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/intro/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/intro/">
          Introduction
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/intro/nexmo-dashboard/" title="Nexmo Dashboard" class="dd-item 
        
        
        
        ">
      <a href="/intro/nexmo-dashboard/">
          Nexmo Dashboard
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/intro/nexmo-cli/" title="Nexmo CLI" class="dd-item 
        
        
        
        ">
      <a href="/intro/nexmo-cli/">
          Nexmo CLI
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/intro/nexmo-ndp/" title="Nexmo NDP" class="dd-item 
        
        
        
        ">
      <a href="/intro/nexmo-ndp/">
          Nexmo NDP
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/intro/ngrok/" title="ngrok" class="dd-item 
        
        
        
        ">
      <a href="/intro/ngrok/">
          ngrok
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/intro/nexmo-overview/" title="Nexmo NDP" class="dd-item 
        
        
        
        ">
      <a href="/intro/nexmo-overview/">
          Nexmo NDP
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/sms/" title="SMS API" class="dd-item 
        parent
        
        
        ">
      <a href="/sms/">
          SMS API
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/sms/send-sms/" title="Send an SMS" class="dd-item 
        
        
        
        ">
      <a href="/sms/send-sms/">
          Send an SMS
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/sms/receive-sms/" title="Receive an SMS" class="dd-item 
        
        
        
        ">
      <a href="/sms/receive-sms/">
          Receive an SMS
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/sms/receive-dlr/" title="Receiving Delivery Receipts" class="dd-item 
        parent
        active
        
        ">
      <a href="/sms/receive-dlr/">
          Receiving Delivery Receipts
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/sms/advanced/" title="Advanced" class="dd-item 
        
        
        
        ">
      <a href="/sms/advanced/">
          Advanced
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/sms/advanced/sign-outbound/" title="Sign Outbound SMS" class="dd-item 
        
        
        
        ">
      <a href="/sms/advanced/sign-outbound/">
          Sign Outbound SMS
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/sms/advanced/validate-signature/" title="Validate Inbound SMS" class="dd-item 
        
        
        
        ">
      <a href="/sms/advanced/validate-signature/">
          Validate Inbound SMS
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/sms/advanced/sms-proxy/" title="SMS Proxy" class="dd-item 
        
        
        
        ">
      <a href="/sms/advanced/sms-proxy/">
          SMS Proxy
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/verify/" title="Verify API" class="dd-item 
        
        
        
        ">
      <a href="/verify/">
          Verify API
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/verify/create-verify-request/" title="Create Verify Request" class="dd-item 
        
        
        
        ">
      <a href="/verify/create-verify-request/">
          Create Verify Request
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/verify/check-verify-request/" title="Check Verify Request" class="dd-item 
        
        
        
        ">
      <a href="/verify/check-verify-request/">
          Check Verify Request
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/verify/workflows/" title="Workflows" class="dd-item 
        
        
        
        ">
      <a href="/verify/workflows/">
          Workflows
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/verify/advance-verify-request/" title="Advance to Next Event" class="dd-item 
        
        
        
        ">
      <a href="/verify/advance-verify-request/">
          Advance to Next Event
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/verify/cancel-verify/" title="Cancel Verify Request" class="dd-item 
        
        
        
        ">
      <a href="/verify/cancel-verify/">
          Cancel Verify Request
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/voice/" title="Voice API" class="dd-item 
        
        
        
        ">
      <a href="/voice/">
          Voice API
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/voice/first-call/" title="Make Your First Call" class="dd-item 
        
        
        
        ">
      <a href="/voice/first-call/">
          Make Your First Call
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/voice/answer-call/" title="Call Your Application" class="dd-item 
        
        
        
        ">
      <a href="/voice/answer-call/">
          Call Your Application
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/voice/user-input/" title="Interact with your user" class="dd-item 
        
        
        
        ">
      <a href="/voice/user-input/">
          Interact with your user
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/voice/build-ivr/" title="Building an IVR" class="dd-item 
        
        
        
        ">
      <a href="/voice/build-ivr/">
          Building an IVR
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/voice/record-a-call/" title="Record a Call" class="dd-item 
        
        
        
        ">
      <a href="/voice/record-a-call/">
          Record a Call
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/voice/voice-proxy/" title="Voice Proxying" class="dd-item 
        
        
        
        ">
      <a href="/voice/voice-proxy/">
          Voice Proxying
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/messages/" title="Messages and Dispatch" class="dd-item 
        
        
        
        ">
      <a href="/messages/">
          Messages and Dispatch
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Vonage Workshop</a> > <a href='/sms/'>SMS API</a> > Receiving Delivery Receipts
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#isnt-my-successful-sms-request-enough">Isn't my Successful SMS Request Enough?</a></li>
    <li><a href="#oh-so-what-if-i-want-to-know-my-message-has-been-delivered">Oh, So What if I Want to Know My Message Has Been Delivered?</a></li>
    <li><a href="#how-do-i-receive-a-dlr">How Do I Receive A DLR</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Receiving Delivery Receipts
            </h1>
          

        




	<h2 id="isnt-my-successful-sms-request-enough">Isn't my Successful SMS Request Enough?</h2>
<p>When you make a successful request to the SMS API, it returns an array of message objects, one for each message. Ideally these will have a status of 0, indicating success. But this does not mean that your message has reached your recipients. It only means that your message has been successfully queued for sending.</p>
<h2 id="oh-so-what-if-i-want-to-know-my-message-has-been-delivered">Oh, So What if I Want to Know My Message Has Been Delivered?</h2>
<p>Nexmo's adaptive routing then identifies the best carrier for your message. When the selected carrier has delivered the message, it returns a delivery receipt (DLR).</p>
<blockquote>
<p>Note: In most situations, a DLR is a reliable indicator that a message was delivered. However, it is not an absolute guarantee. <a href="https://developer.nexmo.com/messaging/sms/guides/delivery-receipts#how-delivery-receipts-work">See How Delivery Receipts work</a></p>
</blockquote>
<h2 id="how-do-i-receive-a-dlr">How Do I Receive A DLR</h2>
<p>Receiving a Delivery Receipt from a sent SMS messages works in a similar fashion to receiving an inbound SMS message in that it comes back via webhook. However it must be set from either the dashboard or the Account API as the CLI doesn't contain a means of setting it.</p>
<p>Create a file: <code>receive_dlr.js</code></p>
<p>Add the following code to it:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;express&#39;</span>)()
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">bodyParser</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;body-parser&#39;</span>)
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Nexmo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;nexmo&#39;</span>)

<span style="color:#a6e22e">app</span>
  .<span style="color:#a6e22e">route</span>(<span style="color:#e6db74">&#39;/webhooks/dlr&#39;</span>)
  .<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">handleDlr</span>)
  .<span style="color:#a6e22e">post</span>(<span style="color:#a6e22e">handleDlr</span>)

  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handleDlr</span>(<span style="color:#a6e22e">request</span>, <span style="color:#a6e22e">response</span>){
      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">request</span>);
      <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">status</span>(<span style="color:#ae81ff">204</span>).<span style="color:#a6e22e">send</span>()
  }
  <span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">PORT</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">3000</span>)
</code></pre></div><ul>
<li>Set your accounts webhooks dlr to point at your route.</li>
<li>Start the dlr server with <code>node receive_dlr.js</code></li>
<li>Send an SMS over the Nexmo API.</li>
</ul>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/sms/receive-sms/" title="Receive an SMS"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/sms/advanced/" title="Advanced" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1578597367"></script>
    <script src="/js/perfect-scrollbar.min.js?1578597367"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1578597367"></script>
    <script src="/js/jquery.sticky.js?1578597367"></script>
    <script src="/js/featherlight.min.js?1578597367"></script>
    <script src="/js/highlight.pack.js?1578597367"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1578597367"></script>
    <script src="/js/learn.js?1578597367"></script>
    <script src="/js/hugo-learn.js?1578597367"></script>

    <link href="/mermaid/mermaid.css?1578597367" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1578597367"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
