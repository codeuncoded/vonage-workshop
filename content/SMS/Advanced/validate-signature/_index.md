---
title: "Validate Inbound SMS"
weight : 20
---

## Overview

If we were to turn on SMS Signing with our Nexmo Accounts you will, when you receive an inbound SMS webhook, receive a 'sig' parameter as part of it. This signature was generated by Nexmo and you can validate it with your signature secret, allowing you to verify that the origin of the message was in fact Nexmo.

> NOTE this feature must be enabled by support@nexmo.com

## Validate With a Server SDK

The server SDK's support signature verification so verifying the signature is as simple as pulling the parameters out of the request and comparing them against the sig parameter. 

### Write the Code

Create a file called 'receive-signed-sms.js' and add the following to it:

```js
const app = require('express')()
const bodyParser = require('body-parser')
const Nexmo = require('nexmo')

app
  .route('/webhooks/inbound-sms')
  .get(handleInboundSms)
  .post(handleInboundSms)

function handleInboundSms(request, response) {
  const params = Object.assign(request.query, request.body)

  const NEXMO_API_SIGNATURE_SECRET = process.env.NEXMO_API_SIGNATURE_SECRET
  if (Nexmo.generateSignature("md5hash", NEXMO_API_SIGNATURE_SECRET, params) === params.sig) {
    console.log("Valid signature");
  } else {
    console.log("Invalid signature");
  }

  response.status(204).send()
}

app.listen(process.env.PORT || 3000)
```

With this - configure your account or number's inbound SMS webhook to point at this endpoint, then run:

`NEXMO_API_SIGNATURE_SECRET=NEXMO_API_SIGNATURE_SECRET node receive-signed-sms.js`

Now whenever you send an SMS to your number - you will receive a message in your terminal 'Valid signature' indicating that the signature has been accepted.

If you were to send something with a bad signature to this endpoint via curl or postman, you would see the 'Invalid Signature' message indicating that the signature was not validated.

## If You Needed to DIY
To validate that the signature matches what the API should have sent you - you will take the the inbound message parameters - remove the sig from it, arrange it as you would for an outbound message (alphabetically, as a query string with an ampersand '&' at the head of the string) - and Sign the Parameters with your Signature Secret. 

